<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3558 KVK SCHEDULE</title>
  <style>
    /* Fuente personalizada de Google Fonts para un look más moderno */
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap');

    body { 
      font-family: 'Orbitron', Arial, sans-serif; 
      margin: 20px; 
      background: #0d0a2b; /* Fondo azul noche oscuro del logo */
      color: #e0d8ff; /* Color de texto lavanda pálido */
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
    }

    .container {
        width: 100%;
        max-width: 600px;
        background: rgba(18, 14, 58, 0.6);
        padding: 25px;
        border-radius: 15px;
        border: 1px solid #3c2f8a;
        box-shadow: 0 0 25px rgba(255, 10, 220, 0.3);
    }

    h2 { 
      text-align: center; 
      font-size: 2.5em;
      /* Gradiente de texto de cian a magenta */
      background: linear-gradient(90deg, #0abcf9, #ff0adc);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 10px rgba(10, 188, 249, 0.5), 0 0 20px rgba(255, 10, 220, 0.5);
      margin-bottom: 30px;
    }

    .input-group { 
      margin: 15px 0; 
      display: flex;
      align-items: center;
    }
    
    label { 
      display: inline-block; 
      width: 180px; 
      color: #a79fdc;
      font-size: 0.9em;
    }
    
    input { 
      padding: 8px 12px; 
      width: 200px;
      background: #120e3a;
      border: 1px solid #3c2f8a;
      color: #e0d8ff;
      border-radius: 5px;
      font-family: Arial, sans-serif;
    }
    
    input:focus {
        outline: none;
        border-color: #0abcf9;
        box-shadow: 0 0 10px rgba(10, 188, 249, 0.7);
    }

    button {
        display: block;
        width: 100%;
        padding: 12px;
        margin: 25px 0;
        font-family: 'Orbitron', sans-serif;
        font-size: 1.2em;
        font-weight: bold;
        color: #e0d8ff;
        background: linear-gradient(90deg, #0abcf9, #ff0adc);
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 0 15px rgba(10, 188, 249, 0.5);
    }

    button:hover {
        transform: scale(1.02);
        box-shadow: 0 0 25px rgba(255, 10, 220, 0.8), 0 0 15px rgba(10, 188, 249, 0.8);
    }

    table { 
      width: 100%; 
      border-collapse: collapse; 
      margin-top: 20px; 
      border: 1px solid #3c2f8a;
      border-radius: 8px;
      overflow: hidden;
    }
    
    th, td { 
      border: 1px solid #3c2f8a; 
      padding: 12px; 
      text-align: center; 
    }
    
    th { 
      background: #120e3a;
      color: #ff0adc; /* Color magenta para los encabezados */
      text-shadow: 0 0 5px rgba(255, 10, 220, 0.7);
    }

    td {
        background: rgba(13, 10, 43, 0.8);
    }
    
    .highlight { 
      font-weight: bold; 
      color: #0abcf9; /* Color cian para los eventos */
      text-shadow: 0 0 5px rgba(10, 188, 249, 0.7);
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>3558 KVK SCHEDULE</h2>

    <div class="input-group">
      <label>Registration Date:</label>
      <input type="date" id="regDate" value="2025-08-18">
    </div>

    <div class="input-group">
      <label>First Steps (time):</label>
      <input type="text" id="firstSteps" value="13:00:00">
    </div>

    <div class="input-group">
      <label>Siege the Land (time):</label>
      <input type="text" id="siegeLand" value="25:00:00">
    </div>

    <button onclick="calculateDates()">Calculate</button>

    <table>
      <thead>
        <tr>
          <th>Event</th>
          <th>Date & Time</th>
        </tr>
      </thead>
      <tbody id="eventsTable"></tbody>
    </table>
  </div>

  <script>
    const baseEvents = [
      { name: "Ancient ruins", offsetDays: 21, siegeAffected: false },
      { name: "Pass 4*", offsetDays: 24, siegeAffected: false },
      { name: "Pass 6*", offsetDays: 34, siegeAffected: true },
      { name: "Altar of darkness", offsetDays: 35, siegeAffected: true },
      { name: "Pass 7", offsetDays: 45, siegeAffected: true },
      { name: "Pass 8", offsetDays: 48, siegeAffected: true },
      { name: "Great ziggurat", offsetDays: 54, siegeAffected: true },
      { name: "Pass 5", offsetDays: 57, siegeAffected: true },
      { name: "Pass 4", offsetDays: 61, siegeAffected: true },
    ];

    // --- INICIO DE LOS CAMBIOS ---

    function formatDate(d) {
      // Usa 'en-US' para inglés y obtiene las horas/minutos en UTC.
      // Añade "UTC" al final para mayor claridad.
      return d.toLocaleDateString('en-US', { weekday: 'short', day: 'numeric', month: 'numeric' }) + " " +
             d.getUTCHours().toString().padStart(2,'0') + ":" + d.getUTCMinutes().toString().padStart(2,'0') + " UTC";
    }

    function parseTimeToHours(timeStr) {
      const [hh, mm, ss] = timeStr.split(":").map(Number);
      return hh + mm/60 + ss/3600;
    }

    function calculateDates() {
      // El input de tipo "date" se interpreta como UTC 00:00, lo cual es perfecto.
      const regDate = new Date(document.getElementById("regDate").value);
      const firstSteps = parseTimeToHours(document.getElementById("firstSteps").value);
      const siegeLand = parseTimeToHours(document.getElementById("siegeLand").value);

      const defaultFirstSteps = 24;
      const defaultSiegeLand = 48;

      const adjustFirst = firstSteps - defaultFirstSteps;
      const adjustSiege = siegeLand - defaultSiegeLand;

      let tbody = document.getElementById("eventsTable");
      tbody.innerHTML = "";

      baseEvents.forEach(ev => {
        let date = new Date(regDate);
        
        // --- Usa métodos UTC para todos los cálculos ---
        date.setUTCDate(date.getUTCDate() + ev.offsetDays);
        date.setUTCHours(1,0,0,0); // Hora por defecto 01:00 UTC

        // Aplica el ajuste de First Steps en UTC
        date.setUTCHours(date.getUTCHours() + adjustFirst);

        // Aplica el ajuste de Siege en UTC
        if (ev.siegeAffected) {
          date.setUTCHours(date.getUTCHours() + adjustSiege);
        }

        let row = `<tr><td class="highlight">${ev.name}</td><td>${formatDate(date)}</td></tr>`;
        tbody.innerHTML += row;
      });
    }
    
    // --- FIN DE LOS CAMBIOS ---

    // Run once on load
    calculateDates();
  </script>
</body>
</html>```
